DROP TABLE BASI;
DROP TABLE BICCHIERI;
DROP TABLE COCKTAILS;
DROP TABLE ADDITIVINONPROPORZIONABILI;
DROP TABLE ADDITIVIPROPORZIONABILI ;
DROP TABLE COMPOSIZIONIADDITIVINP ;
DROP TABLE COMPOSIZIONIADDITIVIP ;
DROP TABLE COMPOSIZIONIBICCHIERI ;
DROP TABLE COMPOSIZIONICOCKTAILS ;
DROP TABLE ORDINI;

CREATE TABLE ADDITIVINONPROPORZIONABILI(
	NOME VARCHAR(25) NOT NULL PRIMARY KEY,
	DESCRIZIONE VARCHAR(100) NOT NULL
);
CREATE TABLE ADDITIVIPROPORZIONABILI(
	NOME VARCHAR(25) NOT NULL PRIMARY KEY,
	DESCRIZIONE VARCHAR(100) NOT NULL
);

CREATE TABLE BASI(
	NOME VARCHAR(25) NOT NULL PRIMARY KEY,
	MARCA VARCHAR(20) NOT NULL,
	GRADOALCOLICO DOUBLE NOT NULL,
	TIPO INT NOT NULL
);

CREATE TABLE BICCHIERI(
	ID INT NOT NULL PRIMARY KEY,
	DESCRIZIONEFORMA VARCHAR(150) NOT NULL,
	DESCRIZIONEDIMENSIONE VARCHAR(150) NOT NULL
);

CREATE TABLE COCKTAILS(
	NOME VARCHAR(25) NOT NULL PRIMARY KEY,
	COLORE VARCHAR(25) NOT NULL,
	DESCRIZIONE VARCHAR(150) NOT NULL,
	PREPARAZIONE VARCHAR(150) NOT NULL,
	QTAB DOUBLE NOT NULL,
	TIPO INT NOT NULL,
	OPACITA INT NOT NULL,
	GRADOALCOLICO INT NOT NULL,
	NOMEBASE VARCHAR(25)
);

CREATE TABLE COMPOSIZIONIADDITIVINP(
	NOMEADDNP VARCHAR(25) NOT NULL,
	DESCRIZIONEQUANTITA VARCHAR(25) NOT NULL,
	NOMECOCKTAIL VARCHAR(25) NOT NULL,
	CONSTRAINT key1 PRIMARY KEY(NOMEADDNP, NOMECOCKTAIL)
);

CREATE TABLE COMPOSIZIONIADDITIVIP(
	NOMEADDP VARCHAR(25) NOT NULL,
	QUANTITA DOUBLE NOT NULL,
	NOMECOCKTAIL VARCHAR(25) NOT NULL,
	CONSTRAINT key2 PRIMARY KEY(NOMEADDP , NOMECOCKTAIL)
);

CREATE TABLE COMPOSIZIONIBICCHIERI(
	NOMECOCKTAIL VARCHAR(25) NOT NULL,
	IDBICCHIERE  INT NOT NULL,
	TEMPERATURA DOUBLE NOT NULL,
	CONSTRAINT key3 PRIMARY KEY(NOMECOCKTAIL, IDBICCHIERE)
);

CREATE TABLE COMPOSIZIONICOCKTAILS(
	NOMECOCKTAIL VARCHAR(25) NOT NULL,
	IDORDINE  INT NOT NULL,
	NUMERO INT NOT NULL,
	CONSTRAINT key4 PRIMARY KEY(NOMECOCKTAIL, IDORDINE)
);

CREATE TABLE ORDINI(
	ID INT NOT NULL  AUTO_INCREMENT PRIMARY KEY,
	NUMEROTAVOLO INT NOT NULL,
	STATO INT NOT NULL
);

ALTER TABLE COCKTAILS ADD CONSTRAINT fk1 FOREIGN KEY (NOMEBASE) REFERENCES BASI(NOME) ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE COMPOSIZIONIADDITIVINP ADD CONSTRAINT fk2 FOREIGN KEY (NOMECOCKTAIL) REFERENCES COCKTAILS(NOME) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE COMPOSIZIONIADDITIVINP ADD CONSTRAINT fk3 FOREIGN KEY (NOMEADDNP) REFERENCES ADDITIVINONPROPORZIONABILI(NOME) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE COMPOSIZIONIADDITIVIP ADD CONSTRAINT fk4 FOREIGN KEY (NOMEADDP) REFERENCES ADDITIVIPROPORZIONABILI(NOME) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE COMPOSIZIONIADDITIVIP ADD CONSTRAINT fk5 FOREIGN KEY (NOMECOCKTAIL) REFERENCES COCKTAILS(NOME) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE COMPOSIZIONIBICCHIERI ADD CONSTRAINT fk6 FOREIGN KEY (NOMECOCKTAIL) REFERENCES COCKTAILS(NOME) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE COMPOSIZIONIBICCHIERI ADD CONSTRAINT fk7 FOREIGN KEY (IDBICCHIERE) REFERENCES BICCHIERI(ID) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE COMPOSIZIONICOCKTAILS ADD CONSTRAINT fk8 FOREIGN KEY (NOMECOCKTAIL) REFERENCES COCKTAILS(NOME) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE COMPOSIZIONICOCKTAILS ADD CONSTRAINT fk9 FOREIGN KEY (IDORDINE) REFERENCES ORDINI(ID) ON DELETE CASCADE ON UPDATE CASCADE;





